<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>Playlist Web</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        /* ğŸ“Œ GLOBAL */
        body.app-body {
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: #121212;
            /* í˜ì´ì§€ ê¸°ë³¸ ë°°ê²½ */
            color: #e0e0e0;
            /* ê¸°ë³¸ í…ìŠ¤íŠ¸ ìƒ‰ */
            display: flex;
        }

        /* ğŸ“Œ ì‚¬ì´ë“œë°” */
        .sidebar {
            width: 220px;
            background-color: #1a1a1a;
            border-right: 1px solid #2a2a2a;
            height: 100vh;
            padding: 20px 16px;
            box-sizing: border-box;
            position: fixed;
            left: 0;
            top: 0;
            color: #e6e6e6;
        }

        .sidebar__username {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 24px;
        }

        .sidebar__menu {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
            gap: 14px;
        }

        .sidebar__menu a {
            text-decoration: none;
            color: #d0d0d0;
            padding: 8px 6px;
            border-radius: 4px;
            display: block;
            font-size: 15px;
            transition: 0.15s;
        }

        .sidebar__menu a:hover {
            background-color: #2b2b2b;
            color: #fff;
        }

        /* ğŸ“Œ ë©”ì¸ ì½˜í…ì¸  */
        .page {
            margin-left: 220px;
            width: 100%;
            padding: 24px 16px 40px;
            box-sizing: border-box;
            color: #e0e0e0;
        }

        /* HEADER */
        .page__header {
            margin-bottom: 24px;
        }

        .page__title {
            font-size: 24px;
            margin: 0;
        }

        /* CONTENT CONTAINERS */
        .page__content {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        /* PLAYLIST ITEM ì¹´ë“œ */
        .playlist-list__item {
            background-color: #1e1e1e;
            /* ì¹´ë“œ ë°°ê²½ */
            border-radius: 6px;
            padding: 12px 14px;
            border: 1px solid #2c2c2c;
            margin-bottom: 12px;
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .playlist-list__thumb img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 4px;
        }

        .playlist-list__title a {
            text-decoration: none;
            color: #ffffff;
        }

        .playlist-list__title a:hover {
            text-decoration: underline;
        }

        .playlist-list__meta {
            font-size: 13px;
            color: #b3b3b3;
        }

        /* EMPTY STATE */
        .empty-state {
            background-color: #1e1e1e;
            border: 1px solid #2c2c2c;
            color: #bdbdbd;
            padding: 16px 14px;
            border-radius: 6px;
            font-size: 14px;
        }
    </style>
</head>

<body class="app-body">

    <!-- ğŸ“Œ ì™¼ìª½ ì‚¬ì´ë“œë°” -->
    <aside class="sidebar">
        {% if session.get('user_id') %}
        <div class="sidebar__username">
            {{ session.get('username') }} ë‹˜
            {% if session.get('is_admin') %}
            <span
                style="display:inline-block;font-size:12px;margin-left:6px;padding:2px 6px;border:1px solid #bbb;border-radius:10px;vertical-align:middle;">
                admin
            </span>
            {% endif %}
        </div>
        {% else %}
        <div class="sidebar__username">Guest</div>
        {% endif %}

        <ul class="sidebar__menu">
            {% if session.get('user_id') %}
            <li><a href="{{ url_for('logout') }}">ë¡œê·¸ì•„ì›ƒ</a></li>
            {% else %}
            <li><a href="{{ url_for('login') }}">ë¡œê·¸ì¸</a></li>
            {% endif %}

            <li><a href="{{ url_for('index') }}">í”Œë ˆì´ë¦¬ìŠ¤íŠ¸</a></li>

            {% if session.get('user_id') %}
            <li><a href="{{ url_for('create_playlist') }}">+ í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ ì¶”ê°€</a></li>
            {% endif %}

            {% if session.get('is_admin') %}
            <li><a href="{{ url_for('manage_songs') }}">ğŸ›ï¸ ë…¸ë˜ ê´€ë¦¬í•˜ê¸°</a></li>
            {% endif %}
        </ul>
    </aside>

    <!-- ğŸ“Œ ì˜¤ë¥¸ìª½ ë³¸ë¬¸ -->
    <div class="page">

        <header class="page__header">
            <h1 class="page__title">í”Œë ˆì´ë¦¬ìŠ¤íŠ¸</h1>
        </header>

        <main class="page__content">
            {% if playlists and playlists|length > 0 %}
            <ul class="playlist-list">
                {% for pl in playlists %}
                <li class="playlist-list__item">
                    {% if pl["display_cover_url"] %}
                    <div class="playlist-list__thumb">
                        <img src="{{ pl['display_cover_url'] }}" alt="playlist cover">
                    </div>
                    {% endif %}

                    <div class="playlist-list__body">
                        <h2 class="playlist-list__title">
                            <a href="{{ url_for('view_playlist', playlist_id=pl['playlist_id']) }}">
                                {{ pl["title"] or "ì œëª© ì—†ìŒ" }}
                            </a>
                        </h2>
                        <div class="playlist-list__meta">
                            <span>ë²ˆí˜¸: {{ pl["playlist_id"] }}</span>
                            <span>ì‘ì„±ì: {{ pl["username"] or "ì•Œ ìˆ˜ ì—†ìŒ" }}</span>
                            <span>ë‚ ì§œ: {{ pl["created_at"] or "ë‚ ì§œ ì—†ìŒ" }}</span>
                        </div>
                    </div>
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <div class="empty-state">
                ë“±ë¡ëœ í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.
            </div>
            {% endif %}
        </main>

    </div>

</body>

</html>